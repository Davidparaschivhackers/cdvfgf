-- Wait for Game Load
repeat task.wait() until game:IsLoaded()

-- Stable Orion Library Load
local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()

local Window = OrionLib:MakeWindow({
    Name = "üéØ MVSD XENO ELITE DEV (Prelease 1.7) üéØ", 
    HidePremium = true, 
    SaveConfig = true, 
    ConfigFolder = "Xeno_Elite_MVSD", 
    IntroText = "Xeno Elite: Stabilizing Logic..."
})

-- [[ GLOBAL STATE ]] --
_G.MassShoot = 1
_G.NoRecoil = false
_G.Hitbox = false
_G.HSize = 2
_G.ESP = false
_G.Names = false
_G.SpeedEnabled = false
_G.SpeedValue = 16
_G.InfJump = false
_G.Noclip = false
_G.RainbowESP = false
local SelectedOpponent = ""

-- [[ 1. COMBAT TAB ]] --
local CombatTab = Window:MakeTab({Name = "Combat", Icon = "rbxassetid://6718318138"})
CombatTab:AddToggle({Name = "No Recoil", Default = false, Callback = function(v) _G.NoRecoil = v end})
CombatTab:AddSlider({Name = "Mass Shoot", Min = 1, Max = 10, Default = 1, Callback = function(v) _G.MassShoot = v end})
CombatTab:AddToggle({Name = "Enable Hitboxes", Default = false, Callback = function(v) _G.Hitbox = v end})
CombatTab:AddSlider({Name = "Hitbox Size", Min = 2, Max = 50, Default = 2, Callback = function(v) _G.HSize = v end})

-- [[ 2. VISUALS TAB ]] --
local VisualTab = Window:MakeTab({Name = "Visuals", Icon = "rbxassetid://78134819718605"})
VisualTab:AddToggle({Name = "ESP Boxes", Default = false, Callback = function(v) _G.ESP = v end})
VisualTab:AddToggle({Name = "Player Names", Default = false, Callback = function(v) _G.Names = v end})
VisualTab:AddToggle({Name = "Rainbow Visuals", Default = false, Callback = function(v) _G.RainbowESP = v end})
VisualTab:AddSlider({Name = "FOV", Min = 70, Max = 120, Default = 70, Callback = function(v) workspace.CurrentCamera.FieldOfView = v end})

-- [[ 3. LOCALPLAYER TAB ]] --
local PlayerTab = Window:MakeTab({Name = "LocalPlayer", Icon = "rbxassetid://16140823621"})
PlayerTab:AddSection({Name = "‚ö†Ô∏è Tip: Jump With Noclip Off it Will Cancel!"})
PlayerTab:AddToggle({
    Name = "WalkSpeed Enable", 
    Default = false, 
    Callback = function(v) 
        _G.SpeedEnabled = v 
        if not v and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid") then
            game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16
        end
    end
})
PlayerTab:AddSlider({Name = "Speed Value", Min = 16, Max = 250, Default = 16, Callback = function(v) _G.SpeedValue = v end})
PlayerTab:AddToggle({Name = "Noclip", Default = false, Callback = function(v) _G.Noclip = v end})
PlayerTab:AddToggle({Name = "Infinite Jump", Default = false, Callback = function(v) _G.InfJump = v end})

-- [[ 4. TELEPORT TAB ]] --
local TPTab = Window:MakeTab({Name = "Teleport", Icon = "rbxassetid://18209575418"})
local function GetPlayers()
    local p = {}
    for _, v in pairs(game.Players:GetPlayers()) do
        if v ~= game.Players.LocalPlayer then table.insert(p, v.Name) end
    end
    return p
end
local PlayerDrop = TPTab:AddDropdown({Name = "Select Player", Options = GetPlayers(), Callback = function(v) SelectedOpponent = v end})
TPTab:AddButton({Name = "Refresh List", Callback = function() PlayerDrop:Refresh(GetPlayers(), true) end})
TPTab:AddButton({Name = "Teleport", Callback = function()
    local target = game.Players:FindFirstChild(SelectedOpponent)
    if target and target.Character then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,3)
    end
end})

-- [[ 5. CONFIG TAB ]] --
local ConfigTab = Window:MakeTab({Name = "Config", Icon = "rbxassetid://84405778323802"})
ConfigTab:AddButton({Name = "Reset Everything", Callback = function()
    _G.SpeedEnabled = false; _G.Noclip = false; _G.Hitbox = false; _G.ESP = false;
    pcall(function() game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16 end)
    OrionLib:MakeNotification({Name="Xeno", Content="Reset Applied", Time=2})
end})

-- [[ THE ENGINES (WHY IT WORKS) ]] --
local LP = game.Players.LocalPlayer

-- Force Walkspeed & Noclip Loop
game:GetService("RunService").Stepped:Connect(function()
    pcall(function()
        if LP.Character and LP.Character:FindFirstChild("Humanoid") then
            if _G.SpeedEnabled then LP.Character.Humanoid.WalkSpeed = _G.SpeedValue end
            if _G.Noclip then
                for _, v in pairs(LP.Character:GetDescendants()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
            end
        end
    end)
end)

-- GunController Injection (Memory Hacking NoRecoil)
task.spawn(function()
    while task.wait(0.5) do
        if _G.NoRecoil then
            for _, v in pairs(getgc(true)) do
                if type(v) == "table" and (rawget(v, "Recoil") or rawget(v, "recoil")) then
                    v.Recoil = 0
                    v.recoil = 0
                end
            end
        end
    end
end)

-- ESP & Dynamic Hitbox Loop
task.spawn(function()
    while task.wait(0.1) do
        local color = _G.RainbowESP and Color3.fromHSV(tick() % 5 / 5, 1, 1) or Color3.fromRGB(0, 170, 255)
        for _, p in pairs(game.Players:GetPlayers()) do
            if p ~= LP and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local hrp = p.Character.HumanoidRootPart
                if _G.Hitbox then
                    hrp.Size = Vector3.new(_G.HSize, _G.HSize, _G.HSize)
                    hrp.Transparency = 0.7
                else
                    hrp.Size = Vector3.new(2, 2, 1)
                    hrp.Transparency = 1
                end
                local b = hrp:FindFirstChild("EliteBox") or Instance.new("BoxHandleAdornment", hrp)
                b.Name = "EliteBox"; b.Adornee = hrp; b.AlwaysOnTop = true;
                b.Size = _G.Hitbox and Vector3.new(_G.HSize, _G.HSize, 0.1) or Vector3.new(4, 6, 0.1)
                b.Color3 = color; b.Transparency = _G.ESP and 0.5 or 1
            end
        end
    end
end)

OrionLib:Init()
